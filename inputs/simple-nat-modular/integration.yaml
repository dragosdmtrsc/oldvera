nodes:
  - name: switch-ingress
    p4: simple-switch.p4
    dataplane: commands-switch-ingress.txt
    ifaces:
      1: veth0
      2: veth1
  - name: switch-egress
    p4: simple-switch.p4
    dataplane: commands-switch-egress.txt
    ifaces:
      1: veth0
      2: veth1
  - name: router-ingress
    p4: simple-router.p4
    dataplane: commands-simple-router-ingress.txt
    ifaces:
      1: veth0
      2: veth1
  - name: router-egress
    p4: simple-router.p4
    dataplane: commands-simple-router-egress.txt
    ifaces:
      1: veth0
      2: veth1
  - name: nat
    p4: nat.p4
    dataplane: commands-nat.p4
    ifaces:
      1: veth0
      2: veth1
  - name: cpu
    p4: cpu.p4
    dataplane: commands-cpu.p4
    ifaces:
      1: veth0
      2: veth1
edges:
  - from:
      node: router-ingress
      port: 1
    to:
      node: switch-ingress
      port: 2
  - from:
      node: nat
      port: 1
    to:
      node: router-ingress
      port: 2
  - from:
      node: nat
      port: 2
    to:
      node: router-egress
      port: 1
  - from:
      node: router-egress
      port: 2
    to:
      node: switch-egress
      port: 1
  - from:
      node: nat
      port: 3
    to:
      node: cpu
      port: 1
  - from:
      node: cpu
      port: 1
    to:
      node: nat
      port: 3